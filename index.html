<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabs Demo</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/chord_name.css" />
  <link rel="stylesheet" href="css/chord_notes.css" />
  <link rel="stylesheet" href="css/output.css" />

</head>
<body>
  <div class="tabs" role="tablist" aria-label="Input mode">
    <button
      id="tab-chord"
      class="tab"
      role="tab"
      aria-selected="true"
      aria-controls="panel-chord"
      tabindex="0"
    >
      Chord name
    </button>
    <button
      id="tab-notes"
      class="tab"
      role="tab"
      aria-selected="false"
      aria-controls="panel-notes"
      tabindex="-1"
    >
      Notes
    </button>
  </div>

  <section
    id="panel-chord"
    class="tabpanel"
    role="tabpanel"
    aria-labelledby="tab-chord"
    aria-hidden="false"
  >
    <!-- Chord name tab content goes here -->
    <div class="panel-inner">
      <h2>Guitar Chords from Chord Root and Type</h2>
     
      <!-- Chord Type  Form -->
<form class="inline-chord-form" autocomplete="on">
  <div class="inline-row">
    <label for="chord-rootNote">Root Note</label>
    <select id="chord-rootNote" name="rootNote" required>
      <option value="C" selected>C</option>
      <option value="C#/Db">C# / Db</option>
      <option value="D">D</option>
      <option value="D#/Eb">D# / Eb</option>
      <option value="E">E</option>
      <option value="F">F</option>
      <option value="F#/Gb">F# / Gb</option>
      <option value="G">G</option>
      <option value="G#/Ab">G# / Ab</option>
      <option value="A">A</option>
      <option value="A#/Bb">A# / Bb</option>
      <option value="B">B</option>
    </select>

    <label for="chord-chordType">Chord Type</label>
    <select id="chord-chordType" name="chordType" required>
      <option value="maj" selected>Major</option>
      <option value="min">Minor</option>
      <option value="dim">Diminished</option>
      <option value="aug">Augmented</option>
      <option value="dom7">Dom 7</option>
      <option value="maj7">Maj 7</option>
      <option value="min7">Min 7</option>
    </select>

    <label for="chord-startFret">Starting Fret</label>
    <input
      id="chord-startFret"
      name="startFret"
      type="number"
      inputmode="numeric"
      min="0"
      max="24"
      step="1"
      size="3"
      value="0"
      aria-label="Starting Fret"
      required
    />

    <label for="chord-chordSpan">Chord Span</label>
    <select id="chord-chordSpan" name="chordSpan" required>
      <option value="4" selected>4</option>
      <option value="5">5</option>
    </select>

    <button type="submit" class="btn primary">Show</button>
    <button type="reset" class="btn">Clear</button>
  </div>
</form>

      <!-- Chord Type Form  End-->

    </div>
    <div id="chord-output" class="output"></div>
  </section>

  <section
    id="panel-notes"
    class="tabpanel"
    role="tabpanel"
    aria-labelledby="tab-notes"
    aria-hidden="true"
  >
    <!-- Notes tab content goes here -->
    <div class="panel-inner">
      <h2>Guitar Chords from Notes</h2>

    <!-- Note Form -->

<form class="notes-two-row-form" autocomplete="off">
  <!-- Row 1: controls -->
  <div class="row row-top">
    <div class="note-buttons" role="group" aria-label="Select notes">
      <button type="button" class="note-btn" data-note="C">C</button>
      <button type="button" class="note-btn" data-note="Db">Db</button>
      <button type="button" class="note-btn" data-note="D">D</button>
      <button type="button" class="note-btn" data-note="Eb">Eb</button>
      <button type="button" class="note-btn" data-note="E">E</button>
      <button type="button" class="note-btn" data-note="F">F</button>
      <button type="button" class="note-btn" data-note="Gb">Gb</button>
      <button type="button" class="note-btn" data-note="G">G</button>
      <button type="button" class="note-btn" data-note="Ab">Ab</button>
      <button type="button" class="note-btn" data-note="A">A</option>
      <button type="button" class="note-btn" data-note="Bb">Bb</button>
      <button type="button" class="note-btn" data-note="B">B</button>
    </div>

    <label for="chord-startFret">Starting Fret</label>
    <input
      id="notes-startFret"
      name="startFret"
      type="number"
      inputmode="numeric"
      min="0"
      max="24"
      step="1"
      value="0"
      class="fld small"
      aria-label="Starting Fret"
    />

    <label for="chord-chordSpan">Chord Span</label>
    <select id="notes-chordSpan" name="chordSpan" class="fld">
      <option value="4" selected>4</option>
      <option value="5">5</option>
    </select>

    <div class="actions">
      <button type="submit" class="btn primary">Show</button>
      <button type="reset" class="btn">Clear</button>
    </div>
  </div>

  <!-- Row 2: read-only notes -->
  <div class="row row-bottom">
    <label for="notes-notesReadOnly">Notes</label>
    <input
      id="notes-notesReadOnly"
      name="notes"
      type="text"
      readonly
      placeholder="Click note buttons to build"
      aria-readonly="true"
      spellcheck="false"
      class="notes-output"
    />
  </div>
</form>


    <!-- End Note Form -->


    </div>
    <div id="notes-output" class="output"></div>
  </section> 

  <script src="js/tabs.js"></script>
  <script src="js/form.js"></script>
  <script src="js/main.js"></script>

  <!-- Glue code to connect UI to the main.js library -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Handler for the "Chord Name" form
        const chordForm = document.querySelector('.inline-chord-form');
        chordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const root = document.getElementById('chord-rootNote').value;
            const type = document.getElementById('chord-chordType').value;
            const startFret = parseInt(document.getElementById('chord-startFret').value) || 0;
            const chordSpan = parseInt(document.getElementById('chord-chordSpan').value) || 4;
            const fretRange = chordSpan;
            const outputId = 'chord-output';

            // 1. Get the notes for the chord name
            const notes = getNotesForChord(root, type);
            if (notes.length === 0) {
                document.getElementById(outputId).innerHTML = `<p class="error">Could not determine notes for ${root} ${type}.</p>`;
                return;
            }

            // 2. Pass the notes to the fingering generator
            generateChordsFromNotes(notes.join(' '), startFret, fretRange, notes[0], outputId);
        });

        // Handler for the "Notes" form
        const notesForm = document.querySelector('.notes-two-row-form');
        notesForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const notes = document.getElementById('notes-notesReadOnly').value;
            const startFret = parseInt(document.getElementById('notes-startFret').value) || 0;
            const chordSpan = parseInt(document.getElementById('notes-chordSpan').value) || 5; // Allow a slightly larger span for notes
            const fretRange = chordSpan;
            const outputId = 'notes-output';
            
            // The root note is not specified in this form, so we pass null.
            // The findChordFingerings function will use the first note in the list as the root.
            generateChordsFromNotes(notes, startFret, fretRange, null, outputId);
        });
    });
  </script>

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    defer
  ></script>
</body>
</html>
