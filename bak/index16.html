<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guitar Chord Generator</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 24px; }
    .tabs { display: flex; gap: 8px; margin-bottom: 16px; }
    .tab { padding: 8px 12px; border: 1px solid #ccc; border-radius: 6px; cursor: pointer; }
    .tab[aria-selected="true"] { background: #f0f6ff; border-color: #7da8ff; }
    .panel { display: none; }
    .panel[aria-hidden="false"] { display: block; }
    .row { display: grid; grid-template-columns: 160px 1fr; gap: 8px 12px; align-items: center; margin-bottom: 10px; }
    fieldset { border: 1px solid #e3e3e3; border-radius: 8px; padding: 12px; }
    legend { font-weight: 600; }
    .inline { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .readonly { background: #f7f7f7; border: 1px solid #ddd; padding: 8px; border-radius: 6px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>üé∏ Guitar Chord Generator</h1>

  <div class="tabs" role="tablist" aria-label="Input mode">
    <button id="tab-chord" class="tab" role="tab" aria-controls="panel-chord" aria-selected="true">Chord name</button>
    <button id="tab-notes" class="tab" role="tab" aria-controls="panel-notes" aria-selected="false">Notes</button>
  </div>

  <!-- Chord name tab -->
  <section id="panel-chord" class="panel" role="tabpanel" aria-hidden="false" aria-labelledby="tab-chord">
    <fieldset>
      <legend>Chord name mode</legend>

      <div class="row">
        <label for="rootSelect">Root note</label>
        <div class="inline">
          <select id="rootSelect">
            <option value="auto">Auto (first note)</option>
            <option>C</option>
            <option>C# / Db</option>
            <option>D</option>
            <option>D# / Eb</option>
            <option>E</option>
            <option>F</option>
            <option>F# / Gb</option>
            <option>G</option>
            <option>G# / Ab</option>
            <option>A</option>
            <option>A# / Bb</option>
            <option>B</option>
          </select>

          <select id="qualitySelect" aria-label="Chord type">
            <option>Major</option>
            <option>Minor</option>
            <option>Diminished</option>
            <option>Augmented</option>
            <option>Dom 7</option>
            <option>Maj 7</option>
            <option>Min 7</option>
          </select>
        </div>
      </div>

      <div class="row">
        <label>Notes (read-only)</label>
        <output id="chordNotesOut" class="readonly" aria-live="polite">‚Äì</output>
      </div>

      <div class="row">
        <label for="startFretChord">Starting fret</label>
        <select id="startFretChord">
          <option value="0">Open (0)</option>
          <option value="1">1st Fret</option>
          <option value="3">3rd Fret</option>
          <option value="5">5th Fret</option>
          <option value="7">7th Fret</option>
          <option value="9">9th Fret</option>
          <option value="12">12th Fret</option>
        </select>
      </div>

      <div class="row">
        <label for="fretRangeChord">Fret range</label>
        <select id="fretRangeChord">
          <option value="3">3 frets</option>
          <option value="4">4 frets</option>
          <option value="5" selected>5 frets</option>
          <option value="6">6 frets</option>
        </select>
      </div>

      <div class="row">
        <span>Debug</span>
        <label class="inline"><input id="debugChord" type="checkbox" checked /> Hidden debug (kept)</label>
      </div>

      <div class="inline">
        <button id="genFromChord">üéµ Generate chord fingerings</button>
        <button id="clearChord" type="button">üóëÔ∏è Clear</button>
      </div>
    </fieldset>
  </section>

  <!-- Notes tab -->
  <section id="panel-notes" class="panel" role="tabpanel" aria-hidden="true" aria-labelledby="tab-notes">
    <fieldset>
      <legend>Notes mode</legend>

      <div class="row">
        <label for="notesInput">Enter chord notes</label>
        <input id="notesInput" type="text" placeholder="e.g., C E G, F# A# C#" />
      </div>

      <div class="row">
        <label>Chord name (read-only)</label>
        <output id="notesChordNameOut" class="readonly" aria-live="polite">‚Äì</output>
      </div>

      <div class="row">
        <label for="startFretNotes">Starting fret</label>
        <select id="startFretNotes">
          <option value="0">Open (0)</option>
          <option value="1">1st Fret</option>
          <option value="3">3rd Fret</option>
          <option value="5">5th Fret</option>
          <option value="7">7th Fret</option>
          <option value="9">9th Fret</option>
          <option value="12">12th Fret</option>
        </select>
      </div>

      <div class="row">
        <label for="fretRangeNotes">Fret range</label>
        <select id="fretRangeNotes">
          <option value="3">3 frets</option>
          <option value="4">4 frets</option>
          <option value="5" selected>5 frets</option>
          <option value="6">6 frets</option>
        </select>
      </div>

      <div class="row">
        <span>Debug</span>
        <label class="inline"><input id="debugNotes" type="checkbox" checked /> Hidden debug (kept)</label>
      </div>

      <div class="inline">
        <button id="genFromNotes">üéµ Generate chord fingerings</button>
        <button id="clearNotes" type="button">üóëÔ∏è Clear</button>
      </div>
    </fieldset>
  </section>

  <script>
    // Basic tabs
    const tabs = [
      { tab: document.getElementById('tab-chord'), panel: document.getElementById('panel-chord') },
      { tab: document.getElementById('tab-notes'), panel: document.getElementById('panel-notes') },
    ];

    function selectTab(idx) {
      tabs.forEach((t, i) => {
        const selected = i === idx;
        t.tab.setAttribute('aria-selected', String(selected));
        t.panel.setAttribute('aria-hidden', String(!selected));
      });
    }

    tabs.addEventListener('click', () => selectTab(0));
    tabs[1].addEventListener('click', () => selectTab(1));

    // Read-only outputs (stub logic; wire to real engine)
    const rootSel = document.getElementById('rootSelect');
    const qualSel = document.getElementById('qualitySelect');
    const notesOut = document.getElementById('chordNotesOut');
    const chordNameOut = document.getElementById('notesChordNameOut');
    const notesInput = document.getElementById('notesInput');

    function computeNotesFromChord(root, quality){
      // Replace with actual mapping from root + quality to spelled notes
      const triads = {
        'Major': ['1','3','5'],
        'Minor': ['1','b3','5'],
        'Diminished': ['1','b3','b5'],
        'Augmented': ['1','3','#5'],
        'Dom 7': ['1','3','5','b7'],
        'Maj 7': ['1','3','5','7'],
        'Min 7': ['1','b3','5','b7']
      };
      const degs = triads[quality] || [];
      return root === 'auto' ? '‚Äî' : `${root} ${quality} (${degs.join(' ')})`;
    }

    function detectChordNameFromNotes(text){
      if(!text.trim()) return '‚Äî';
      // Replace with actual chord-detection logic
      return 'Detected chord (demo)';
    }

    function refreshChordPanel(){
      notesOut.textContent = computeNotesFromChord(rootSel.value, qualSel.value);
    }

    function refreshNotesPanel(){
      chordNameOut.textContent = detectChordNameFromNotes(notesInput.value);
    }

    rootSel.addEventListener('change', refreshChordPanel);
    qualSel.addEventListener('change', refreshChordPanel);
    notesInput.addEventListener('input', refreshNotesPanel);

    // Initialize
    refreshChordPanel();
    refreshNotesPanel();
  </script>
</body>
</html>